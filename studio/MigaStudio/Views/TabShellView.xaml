<UserControl x:Class="Acorisoft.FutureGL.MigaStudio.Views.TabShellView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:Acorisoft.FutureGL.MigaStudio.Views"
             xmlns:f="urn:acorisoft/forest/ui"
             xmlns:fs="urn:acorisoft/forest/shell"
             xmlns:vm="clr-namespace:Acorisoft.FutureGL.MigaStudio.ViewModels"
             xmlns:s="urn:acorisoft/studio"
             mc:Ignorable="d"
             d:DesignHeight="300" 
             d:DesignWidth="300"
             d:DataContext="{d:DesignInstance Type={x:Type vm:TabShell}, IsDesignTimeCreatable=True}">
    <DockPanel>
        <Grid DockPanel.Dock="Top"
              WindowChrome.IsHitTestVisibleInChrome="False"
              Background="#F1F1F1"
              Height="48">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" />
                <ColumnDefinition Width="144" />
            </Grid.ColumnDefinitions>
            <fs:TitleBar Grid.Column="1"
                         WindowChrome.IsHitTestVisibleInChrome="True"
                         WindowState="{Binding WindowState,Mode=OneWay}"/>

            <ListBox Grid.Column="0"
                     WindowChrome.IsHitTestVisibleInChrome="True"
                     ItemsSource="{Binding Onboards,Mode=OneWay}"
                     Margin="0 0 144 0"
                     VerticalAlignment="Bottom">
                <ListBox.Resources>
                    <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource TabItem}"/>
                </ListBox.Resources>
                <ListBox.ItemTemplate>
                    <DataTemplate DataType="{x:Type s:TabViewModel}">
                        <Border Background="Transparent"
                                Padding="8 8 8 0"
                                MaxWidth="192"
                                MouseDown="MouseDown_ClosePage"
                                WindowChrome.IsHitTestVisibleInChrome="True">
                            <DockPanel>
                                <f:SimpleButton DockPanel.Dock="Right"
                                                  MouseDown="MouseDown_ClosePage"
                                                  MinHeight="20"
                                                  MinWidth="20"
                                                  Height="20"
                                                  Width="20">
                                    <Path Data="{StaticResource CloseIcon}"
                                          Stroke="White"
                                          StrokeThickness="1"
                                          Height="23"
                                          Width="23"/>
                                </f:SimpleButton>
                                <TextBlock DockPanel.Dock="Left"
                                           Text="{Binding Title,Mode=OneWay}"
                                           TextTrimming="CharacterEllipsis"
                                           VerticalAlignment="Center" />
                            </DockPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid>

        <ContentControl/>
    </DockPanel>
</UserControl>
